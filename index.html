<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet"   href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
  <!-- Map-CSS -->
  <link rel="stylesheet"href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
   <!-- Main css -->
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <!-- D3(Data Driven Documents js) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.9/d3.min.js"></script>
  <!-- leaflet map js -->
  <script  src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
  <script src="main.js" charset="utf-8"></script>
</head>
<body>
  <div class="container">
    <div class="head">
      <h1>CONTRACTS VIEWER</h1>
    </div>
    <div class="col-sm-3">
      <!-- list of contracts -->
      <div id="map"></div>
    </div>
    <div class="col-sm-9">
      <div class="cmap">
        <!-- content of contracts -->
        <div id="mapped"></div>
        <!-- map of nepal and their respective locations -->
        <div id="map-canvas" style="height: 400px; width: 800px;"></div>
      </div>
    </div>
  </div>
  <script >
  var data0;
  var data1;
  var data2;
  var data3;
  var data4;
  var data5;
  var data6;
  var data7;
  var data8;
  var data9;
  d3.csv("contracts.csv", function(data) {
    data0 = data[0];
    data1 = data[1];
    data2 = data[2];
    data3 = data[3];
    data4 = data[4];
    data5 = data[5];
    data6 = data[6];
    data7 = data[7];
    data8 = data[8];
    data9 = data[9];
    var map = d3.select("#map")
    map.selectAll("li")
    .data(data)
    .enter().append("ul")
    .append("li")
    .append("a")
     .attr("id","#cmap")
    .text(function (d) {
      debugger;
      return d.contractname;
    })
    mappintest()
  });
  function mappintest() {
    $('#mapped').html('contractname:' + data0.contractname + '<br>' +
         'status:' + data0.status + '<br>' +
        'bidPurchaseDeadline:' + data0.bidPurchaseDeadline + '<br>' +
        'bidSubmissionDeadline:' + data0.bidSubmissionDeadline+ '<br>' +
        'bidOpeningDate:' + data0.bidOpeningDate + '<br>' +
        'tenderid:' + data0.tenderid+ '<br>' +
        'publishedIn:'+ data0.publishedIn+ '<br>' +
        'contractDate:' + data0.contractDate + '<br>'
      )
  }
  var planes = [
    ["Banke",28.160859,81.929169],
  ];
  var maps = L.map('map-canvas').setView([28.12312, 84.12321], 7);
  mapLink =
  '<a href="http://openstreetmap.org">OpenStreetMap</a>';
  L.tileLayer(
    'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; ' + mapLink + ' Contributors',
      maxZoom: 10,
    }).addTo(maps);

    for (var i = 0; i < planes.length; i++) {
      marker = new L.marker([planes[i][1],planes[i][2]])
      .bindPopup(planes[i][0])
      .addTo(maps);
    }
  </script>
</body>
</html>
